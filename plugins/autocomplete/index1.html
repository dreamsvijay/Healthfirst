<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>jQuery autocompleter</title>
    <link rel="stylesheet" type="text/css" href="jquery.autocomplete.css">
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <!--<script type='text/javascript' src='../src/jquery.1.5.1.min.js'></script>-->
    <script language="javascript" type="text/javascript" src="jquery.maskedinput-1.2.2.min.js"></script>
    <script type="text/javascript" src="jquery.autocomplete.js"></script>
    <script type="text/javascript">

$(function() {
	var acOptions = {
		minChars: 3,
		cacheLength: 20,
		multiple:true,
		max: 50,
		multiple:true,
		//dataType: 'json', // this parameter is currently unused
		//extraParams: {
		//	format: 'json' // pass the required context to the Zend Controller
		//},
		//parse: function(data) {
		//	var parsed = [];
		//	data = data.users;
	 //
		//	for (var i = 0; i < data.length; i++) {
		//		parsed[parsed.length] = {
		//			data: data[i],
		//			value: data[i].displayName,
		//			result: data[i].displayName
		//		};
		//	}
	 
		//	return parsed;
		//},
		formatItem: function(value) {
			//return item.displayName + ' (' + item.mail + ')';
			return '<span style="color:red">' + value[0] + '</span>';
		}
	};
	
	
	$('#user_id')
        .autocomplete('search.php', acOptions)
        .attr('name', 'display_name')
        .after('<input type="hidden" name="user_id" id="ac_result">')
        .result(function(e, data) {
			//console.log(data);
			var input = $("#ac_result");
			var comma='';
			if(input.val()!=''){
				comma=',';
			}
			input.val(input.val()+comma+data[1]);
            //$('#ac_result').val(data[1]);
        });

 // $("#user_id").flushCache();

    

});

    </script>
    
    
    <style type="text/css">
	input{
		width:400px;
	}
	</style>
</head>

<body>

    <h1>jQuery autocomplete</h1>
 

    <form>
       <input type="text" id="user_id" name="user_id" multiple>
    </form>

    

</body>

</html>